{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n    globalForPrisma.prisma ||\r\n    new PrismaClient({\r\n        log: ['query'],\r\n    });\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACT,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACb,KAAK;QAAC;KAAQ;AAClB;AAEJ,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/app/api/users/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/db';\r\n\r\nexport async function GET() {\r\n    try {\r\n        const users = await prisma.users.findMany({\r\n            orderBy: {\r\n                CreatedAt: 'desc',\r\n            },\r\n        });\r\n        // Remove passwords from response\r\n        const safeUsers = users.map((user) => {\r\n            const { PasswordHash, ...rest } = user;\r\n            return rest;\r\n        });\r\n        return NextResponse.json(safeUsers);\r\n    } catch (error) {\r\n        console.error('Error fetching users:', error);\r\n        return NextResponse.json(\r\n            { error: 'Failed to fetch users' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { UserName, Email, PasswordHash } = body;\r\n\r\n        // Basic validation\r\n        if (!UserName || !Email || !PasswordHash) {\r\n            return NextResponse.json(\r\n                { error: 'Missing required fields' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        // Check availability\r\n        const existingUser = await prisma.users.findFirst({\r\n            where: {\r\n                OR: [\r\n                    { Email: Email },\r\n                    { UserName: UserName }\r\n                ]\r\n            }\r\n        })\r\n\r\n        if (existingUser) {\r\n            return NextResponse.json({ error: 'User with this email or username already exists' }, { status: 409 })\r\n        }\r\n\r\n        const newUser = await prisma.users.create({\r\n            data: {\r\n                UserName,\r\n                Email,\r\n                PasswordHash, // In a real app we'd hash this here or expect it hashed. The user field is PasswordHash so we assume value is intended to be stored as is for now or hashed before sending.\r\n            },\r\n        });\r\n\r\n        const { PasswordHash: _, ...safeUser } = newUser;\r\n\r\n        return NextResponse.json(safeUser, { status: 201 });\r\n    } catch (error) {\r\n        console.error('Error creating user:', error);\r\n        return NextResponse.json(\r\n            { error: 'Failed to create user' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,QAAQ,MAAM,qHAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;YACtC,SAAS;gBACL,WAAW;YACf;QACJ;QACA,iCAAiC;QACjC,MAAM,YAAY,MAAM,GAAG,CAAC,CAAC;YACzB,MAAM,EAAE,YAAY,EAAE,GAAG,MAAM,GAAG;YAClC,OAAO;QACX;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG;QAE1C,mBAAmB;QACnB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,cAAc;YACtC,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,qBAAqB;QACrB,MAAM,eAAe,MAAM,qHAAM,CAAC,KAAK,CAAC,SAAS,CAAC;YAC9C,OAAO;gBACH,IAAI;oBACA;wBAAE,OAAO;oBAAM;oBACf;wBAAE,UAAU;oBAAS;iBACxB;YACL;QACJ;QAEA,IAAI,cAAc;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkD,GAAG;gBAAE,QAAQ;YAAI;QACzG;QAEA,MAAM,UAAU,MAAM,qHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACtC,MAAM;gBACF;gBACA;gBACA;YACJ;QACJ;QAEA,MAAM,EAAE,cAAc,CAAC,EAAE,GAAG,UAAU,GAAG;QAEzC,OAAO,gJAAY,CAAC,IAAI,CAAC,UAAU;YAAE,QAAQ;QAAI;IACrD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}