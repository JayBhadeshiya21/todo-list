{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n    globalForPrisma.prisma ||\r\n    new PrismaClient({\r\n        log: ['query'],\r\n    });\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACT,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACb,KAAK;QAAC;KAAQ;AAClB;AAEJ,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/app/api/projects/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/db';\r\nimport { cookies } from 'next/headers';\r\n\r\nasync function checkAdmin() {\r\n    const cookieStore = await cookies();\r\n    const adminId = cookieStore.get('adminId');\r\n    return !!adminId;\r\n}\r\n\r\n/* ================= GET ================= */\r\nexport async function GET(\r\n    request: Request,\r\n    context: { params: Promise<{ id: string }> }\r\n) {\r\n    if (!(await checkAdmin())) {\r\n        return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    try {\r\n        const { id } = await context.params;   // ✅ MUST await\r\n        const projectId = parseInt(id);\r\n\r\n        if (isNaN(projectId)) {\r\n            return NextResponse.json({ error: 'Invalid ID' }, { status: 400 });\r\n        }\r\n\r\n        const project = await prisma.projects.findUnique({\r\n            where: { ProjectID: projectId },\r\n            include: { users: { select: { UserName: true } } }\r\n        });\r\n\r\n        if (!project) {\r\n            return NextResponse.json({ error: 'Project not found' }, { status: 404 });\r\n        }\r\n\r\n        return NextResponse.json(project);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        return NextResponse.json({ error: 'Failed to fetch project' }, { status: 500 });\r\n    }\r\n}\r\n\r\n/* ================= PUT ================= */\r\nexport async function PUT(\r\n    request: Request,\r\n    context: { params: Promise<{ id: string }> }\r\n) {\r\n    if (!(await checkAdmin())) {\r\n        return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    try {\r\n        const { id } = await context.params;   // ✅ MUST await\r\n        const projectId = parseInt(id);\r\n\r\n        if (isNaN(projectId)) {\r\n            return NextResponse.json({ error: 'Invalid ID' }, { status: 400 });\r\n        }\r\n\r\n        const body = await request.json();\r\n        const { ProjectName, Description } = body;\r\n\r\n        const updatedProject = await prisma.projects.update({\r\n            where: { ProjectID: projectId },\r\n            data: { ProjectName, Description },\r\n        });\r\n\r\n        return NextResponse.json(updatedProject);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        return NextResponse.json({ error: 'Failed to update project' }, { status: 500 });\r\n    }\r\n}\r\n\r\n/* ================= DELETE ================= */\r\nexport async function DELETE(\r\n    request: Request,\r\n    context: { params: Promise<{ id: string }> }\r\n) {\r\n    if (!(await checkAdmin())) {\r\n        return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    try {\r\n        const { id } = await context.params;   // ✅ MUST await\r\n        const projectId = parseInt(id);\r\n\r\n        if (isNaN(projectId)) {\r\n            return NextResponse.json({ error: 'Invalid ID' }, { status: 400 });\r\n        }\r\n\r\n        await prisma.projects.delete({\r\n            where: { ProjectID: projectId },\r\n        });\r\n\r\n        return NextResponse.json({ message: 'Project deleted successfully' });\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        return NextResponse.json({ error: 'Failed to delete project' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}