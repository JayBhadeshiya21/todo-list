{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n    globalForPrisma.prisma ||\r\n    new PrismaClient({\r\n        log: ['query'],\r\n    });\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACT,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACb,KAAK;QAAC;KAAQ;AAClB;AAEJ,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/app/api/users/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/db';\r\n\r\nexport async function GET(\r\n    request: Request,\r\n    { params }: { params: { id: string } }\r\n) {\r\n    try {\r\n        const id = parseInt(params.id);\r\n        const user = await prisma.users.findUnique({\r\n            where: { UserID: id },\r\n        });\r\n\r\n        if (!user) {\r\n            return NextResponse.json(\r\n                { error: 'User not found' },\r\n                { status: 404 }\r\n            );\r\n        }\r\n\r\n        const { PasswordHash, ...safeUser } = user;\r\n        return NextResponse.json(safeUser);\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to fetch user' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\nexport async function PUT(\r\n    request: Request,\r\n    { params }: { params: { id: string } }\r\n) {\r\n    try {\r\n        const id = parseInt(params.id);\r\n        const body = await request.json();\r\n        const { UserName, Email, RoleID } = body;\r\n\r\n        // Verify user exists first\r\n        const userExists = await prisma.users.findUnique({\r\n            where: { UserID: id }\r\n        });\r\n\r\n        if (!userExists) {\r\n            return NextResponse.json({ error: 'User not found' }, { status: 404 });\r\n        }\r\n\r\n        const updatedUser = await prisma.users.update({\r\n            where: { UserID: id },\r\n            data: {\r\n                UserName,\r\n                Email,\r\n                // If RoleID is provided, we might need to update userroles table.\r\n                // For simplicity in this CRUD, assuming basic user updates.\r\n                // Complex role management might need a separate transaction.\r\n            },\r\n        });\r\n\r\n        // Update role if provided (Simplified: clear old roles, add new one)\r\n        if (RoleID) {\r\n            await prisma.userroles.deleteMany({ where: { UserID: id } });\r\n            await prisma.userroles.create({\r\n                data: {\r\n                    UserID: id,\r\n                    RoleID: parseInt(RoleID)\r\n                }\r\n            });\r\n        }\r\n\r\n        const { PasswordHash, ...safeUser } = updatedUser;\r\n        return NextResponse.json(safeUser);\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to update user' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\nexport async function DELETE(\r\n    request: Request,\r\n    { params }: { params: { id: string } }\r\n) {\r\n    try {\r\n        const id = parseInt(params.id);\r\n        await prisma.users.delete({\r\n            where: { UserID: id },\r\n        });\r\n\r\n        return NextResponse.json({ message: 'User deleted successfully' });\r\n    } catch (error) {\r\n        return NextResponse.json(\r\n            { error: 'Failed to delete user' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,eAAe,IAClB,OAAgB,EAChB,EAAE,MAAM,EAA8B;IAEtC,IAAI;QACA,MAAM,KAAK,SAAS,OAAO,EAAE;QAC7B,MAAM,OAAO,MAAM,qHAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YACvC,OAAO;gBAAE,QAAQ;YAAG;QACxB;QAEA,IAAI,CAAC,MAAM;YACP,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,EAAE,YAAY,EAAE,GAAG,UAAU,GAAG;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAEO,eAAe,IAClB,OAAgB,EAChB,EAAE,MAAM,EAA8B;IAEtC,IAAI;QACA,MAAM,KAAK,SAAS,OAAO,EAAE;QAC7B,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;QAEpC,2BAA2B;QAC3B,MAAM,aAAa,MAAM,qHAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YAC7C,OAAO;gBAAE,QAAQ;YAAG;QACxB;QAEA,IAAI,CAAC,YAAY;YACb,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,MAAM,cAAc,MAAM,qHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YAC1C,OAAO;gBAAE,QAAQ;YAAG;YACpB,MAAM;gBACF;gBACA;YAIJ;QACJ;QAEA,qEAAqE;QACrE,IAAI,QAAQ;YACR,MAAM,qHAAM,CAAC,SAAS,CAAC,UAAU,CAAC;gBAAE,OAAO;oBAAE,QAAQ;gBAAG;YAAE;YAC1D,MAAM,qHAAM,CAAC,SAAS,CAAC,MAAM,CAAC;gBAC1B,MAAM;oBACF,QAAQ;oBACR,QAAQ,SAAS;gBACrB;YACJ;QACJ;QAEA,MAAM,EAAE,YAAY,EAAE,GAAG,UAAU,GAAG;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAEO,eAAe,OAClB,OAAgB,EAChB,EAAE,MAAM,EAA8B;IAEtC,IAAI;QACA,MAAM,KAAK,SAAS,OAAO,EAAE;QAC7B,MAAM,qHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACtB,OAAO;gBAAE,QAAQ;YAAG;QACxB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA4B;IACpE,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}