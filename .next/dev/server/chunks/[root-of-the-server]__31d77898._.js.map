{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n    globalForPrisma.prisma ||\r\n    new PrismaClient({\r\n        log: ['query'],\r\n    });\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACT,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACb,KAAK;QAAC;KAAQ;AAClB;AAEJ,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///D:/Todo-list/todo-list/app/api/tasks/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/db';\r\n\r\nexport async function GET(request: Request) {\r\n    const { searchParams } = new URL(request.url);\r\n    const listId = searchParams.get('listId');\r\n    const projectId = searchParams.get('projectId');\r\n\r\n    try {\r\n        let whereClause: any = {};\r\n        if (listId) {\r\n            whereClause.ListID = parseInt(listId);\r\n        }\r\n        // If filtering by project, we might need to join or assume the client knows the lists.\r\n        // Simplifying: if project ID is passed, we might need nested relation filtering if we want all tasks for a project.\r\n        // tasks -> tasklists -> projects\r\n        if (projectId) {\r\n            whereClause.tasklists = {\r\n                ProjectID: parseInt(projectId)\r\n            }\r\n        }\r\n\r\n        const tasks = await prisma.tasks.findMany({\r\n            where: whereClause,\r\n            include: {\r\n                tasklists: true, // Include list info if needed\r\n                users: { // Include assigned user info\r\n                    select: {\r\n                        UserName: true,\r\n                        Email: true,\r\n                        UserID: true\r\n                    }\r\n                }\r\n            },\r\n            orderBy: {\r\n                CreatedAt: 'desc',\r\n            },\r\n        });\r\n        return NextResponse.json(tasks);\r\n    } catch (error) {\r\n        console.error('Error fetching tasks:', error);\r\n        return NextResponse.json(\r\n            { error: 'Failed to fetch tasks' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { ListID, AssignedTo, Title, Description, Priority, Status, DueDate } = body;\r\n\r\n        if (!ListID || !Title) {\r\n            return NextResponse.json(\r\n                { error: 'ListID and Title are required' },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const newTask = await prisma.tasks.create({\r\n            data: {\r\n                ListID: parseInt(ListID), // Ensure it's an int\r\n                AssignedTo: AssignedTo ? parseInt(AssignedTo) : null,\r\n                Title,\r\n                Description,\r\n                Priority,\r\n                Status,\r\n                DueDate: DueDate ? new Date(DueDate) : null\r\n            },\r\n        });\r\n\r\n        return NextResponse.json(newTask, { status: 201 });\r\n    } catch (error) {\r\n        console.error('Error creating task:', error);\r\n        return NextResponse.json(\r\n            { error: 'Failed to create task' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAgB;IACtC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,SAAS,aAAa,GAAG,CAAC;IAChC,MAAM,YAAY,aAAa,GAAG,CAAC;IAEnC,IAAI;QACA,IAAI,cAAmB,CAAC;QACxB,IAAI,QAAQ;YACR,YAAY,MAAM,GAAG,SAAS;QAClC;QACA,uFAAuF;QACvF,oHAAoH;QACpH,iCAAiC;QACjC,IAAI,WAAW;YACX,YAAY,SAAS,GAAG;gBACpB,WAAW,SAAS;YACxB;QACJ;QAEA,MAAM,QAAQ,MAAM,qHAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;YACtC,OAAO;YACP,SAAS;gBACL,WAAW;gBACX,OAAO;oBACH,QAAQ;wBACJ,UAAU;wBACV,OAAO;wBACP,QAAQ;oBACZ;gBACJ;YACJ;YACA,SAAS;gBACL,WAAW;YACf;QACJ;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG;QAE9E,IAAI,CAAC,UAAU,CAAC,OAAO;YACnB,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAgC,GACzC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,UAAU,MAAM,qHAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YACtC,MAAM;gBACF,QAAQ,SAAS;gBACjB,YAAY,aAAa,SAAS,cAAc;gBAChD;gBACA;gBACA;gBACA;gBACA,SAAS,UAAU,IAAI,KAAK,WAAW;YAC3C;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IACpD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}